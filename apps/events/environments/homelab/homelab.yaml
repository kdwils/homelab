events:
  serviceAccount:
    create: true
    automount: false

  deployment:
    create: true
    replicaCount: 1
    deployStrategy: Recreate

    image:
      repository: ghcr.io/kdwils/events
      tag: v0.0.3
      pullPolicy: IfNotPresent

    env:
      EVENTS_LOGLEVEL: debug
      EVENTS_NATS_HOST: nats.int.kyledev.co
      EVENTS_NATS_SECURE: "true"
      EVENTS_DB_FILE: /data/db.sqlite

    podSecurityContext:
      runAsNonRoot: true
      runAsUser: 1000
      runAsGroup: 1000
      fsGroup: 1000

    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      capabilities:
        drop:
          - ALL

    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 50m
        memory: 64Mi

  service:
    create: true
    type: ClusterIP
    port: 8080
    targetPort: 8080
    name: http

  httproute:
    create: true
    hostnames:
      - "events.int.kyledev.co"
      - "events.ts.kyldev.co"
    parentRefs:
      - name: homelab
        namespace: envoy-gateway-system

  pvc:
    create: true
    pvcs:
      - name: events-data-pvc
        size: 10Gi
        storageClassName: ""
        accessMode: ReadWriteOnce
        mountPath: /data
