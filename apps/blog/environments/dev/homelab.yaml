blog:
  fullnameOverride: blog-dev

  serviceAccount:
    create: true
    automount: true

  deployment:
    create: true
    image:
      repository: ghcr.io/kdwils/blog
      tag: 1.0.6
    replicaCount: 1
    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 50m
        memory: 64Mi

    livenessProbe:
      httpGet:
        path: /
        port: 8080

    readinessProbe:
      httpGet:
        path: /
        port: 8080

    securityContext:
      capabilities:
        drop:
          - ALL
      readOnlyRootFilesystem: true
      runAsNonRoot: true
      runAsUser: 1000

    volumes:
      - name: cache
        emptyDir: {}
      - name: run
        emptyDir: {}

    volumeMounts:
      - name: cache
        mountPath: /var/cache/nginx
      - name: run
        mountPath: /var/run

  httproute:
    create: true
    hostnames:
      - "blog.int.kyledev.co"
      - "blog.ts.kyledev.co"
    parentRefs:
      - name: homelab
        namespace: envoy-gateway-system

  service:
    create: true
    type: ClusterIP
    port: 8080

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 100
    targetCPUUtilizationPercentage: 80
