bluesky:
  serviceAccount:
    create: true
    automount: false

  deployment:
    create: true
    replicaCount: 1
    strategy:
      type: Recreate

    image:
      repository: ghcr.io/bluesky-social/pds
      tag: "0.4.182"
      pullPolicy: IfNotPresent

    env:
      PDS_HOSTNAME: bluesky.kyledev.co
      PDS_DATA_DIRECTORY: /pds
      PDS_BLOBSTORE_DISK_LOCATION: /pds/blocks
      PDS_BSKY_APP_VIEW_URL: https://api.bsky.app
      PDS_BSKY_APP_VIEW_DID: did:web:api.bsky.app
      PDS_CRAWLERS: https://bsky.network
      LOG_ENABLED: "true"

    envFrom:
      - secretRef:
          name: bluesky

    securityContext:
      runAsNonRoot: true
      runAsUser: 1000
      fsGroup: 2000

    containerSecurityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      capabilities:
        drop:
          - ALL

    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 100m
        memory: 128Mi

  service:
    create: true
    type: ClusterIP
    port: 3000
    targetPort: 3000
    name: pds-port

  httproute:
    create: true
    hostnames:
      - bluesky.kyledev.co
      - bluesky.int.kyledev.co
    parentRefs:
      - name: homelab
        namespace: envoy-gateway-system

  pvc:
    create: true
    pvcs:
      - name: bluesky-data
        size: 20Gi
        storageClassName: ""
        accessMode: ReadWriteOnce
        mountPath: /pds

  sealedsecrets:
    - name: bluesky
      data:
        jwtSecret: AgBmQ5FR3hVSRS0KU0qWvK0WvSYcwawUDF0d5SubLqXhCwc+5SeOx718NhuXbS5pIZ1gURjpSIDTdbXeBGoUWoMSyihCQM3kBqNW74oQHCth3z/JfpQBOD2gPujNC1969egxObaEctSHoMRnKliD+Kt9rZZaLN9N96+qiQPG6CBV1rvnA5Vw5PuriaumyQPKTVivJF5dTFGTQTlnXZu0q59PfI92QuckzrsoPkQETT8zy0am9R/FwfxDH61m0RntoGKbs6hW2vyXNwhNNoSkkLhuUV6y0EOGzv38uiogttbvGOB4N5nfkxGYUoaowru39J0GcvViAhfD8XKPHr2VfOv+EWa6MT2Jt0N11b6+918L8SPLX/wY0CjkOP1PK5UL2I9qYVvnrs0yjVd7zWidRE0OBOdjjaAeUKIwZWRmj+ONFKpBJDS+A7VzC9x8YUraLbRB1YvZFXLkRpVFuy0O0uw49vJKsFOkfYXkuOPux1BMwxR0I50YelPNUlM3kfrSrZiLePPUFipq81dqS8u6828tUERoXwGilU1iuh+/JhSpNYQLcGPf4uBNyX70OX2bDMpz10z9YOxnVvbFSQS8mzYXYUSDkaqqHcMgKjiTnvKrwHhVjPCBNF2H/3uCWpFsLP/fbHlkAUUSXnNQY9BeEOs7HWFOZejD29zh8UY9xgOusJ7rK5L30m7ZLlzl6kE4Yr5R6J1SlliAYFGHTR2rg9hkqcRogwmfFVMxDIbzzLc3LA==
        adminPassword: AgB2bX22zjJH43gSGJWtivc9rVWMu/JCum5/s6bxl/56dJ9uD4ufwifDTyz/8DlgTGQNnUSfsUVrAkb8W5Wu218z5j7ZprmkcoNfotlZ03BxzNjIrHRFgPpHI61eImTezW8iIqPjSUSTIHJEnnyFbHkhmGvBHNqeU1NDth73qvPhPKo1j9Iu+3cPKx2fgZdmlFPuJohEm/XbYSyD+JlIiMpqSE//CORwYZqXzg5dOkzpoEB06sIJ7wL3qzY/XUuqS2C9DkGvTBq1u/wOolYi4znAm/mQhab9g2QTUMve9paSHECcQS80EWFKkSPMo4e6jVNGgYMTWWnETMPXdxvgoVd6/F2XsDl6CvGbxU6yMiUDpaHyG3Jv75/EIEHBx3RoWemOqzPl7LTBOtTKPc4y//bpFf1ATe+1y2PJiZx57+Xn6DSEmXOpt7EX1vURsC/JfXJsMUCcOB3kxucwpGe6VPYx7xqmWddFtd0UdBWoXLZftfjgm4GQtWCqMY+jGGZrfId8JJPUTgNiTrUNx6FJnG6X7yoNsUlHPvMJsi+25Z2LGLRMU0X0/Uumz6S+wMoIFBhuAYdDgB609u+cHZVMllYyDc5lTre3ts0R/fW8O74AwEWrZtgg9KgCVZwWmMkqN3t2Oju+qMoNGho59b6VaD79zxsY8EiawvS1/hWRV3PMTzNCOKmgmyYxSayoxCGStXYSaPQAD2urIOVNmKlNFa0WpR0FQjX1KnKO2kwtdBdo8Q==
        plcRotationKey: AgBAmxw4sKCt/icUlvsoGw8+lPuKuCjAzXSQPjxz+pZ9z6tiECyNxQC1k/2nkfK9WH5sFchJxXxkgDbhyr+Gu/uGHotooGDukcy2E8RgEURFFHVw2XUh/st8/BK5jZPU1OzlPCnolelfrW95io0jNSJUJOVSz+5IVS9epAJzPN+8CGdCctqXXo33oypB1oQwsbCdFlG85c/J5GDYDUWrIwHD5KMzJc3aQ7Yoe+xU1T+/0Q9/PZkkxArN3a3Ng2NnpCuRKjhn5v6h23OldP0ykmOLFD7qdw+um+Cu65a/mHRhid7o2pRIov0oPkl+Xs8Q0reIq+XZjyiNRBfKn+jq0LWCpnBk0YU3DYkk9nbl0AWjTVN6WJEBW/E/LdpxyFStdIpfjPTazo+9ELjQ5XY6Onz0V3t9tCO/UWKJEXDMGsp0eImqiE5KVkoR9CPLlqcYt3QvFROnwqRjCVerNv3pQVJXP2nS5RQnhtB67gp0xPTSiQuS5ZyFvKRHV3h2sOpoFtRL6hGWIHT1IzWXjnHh5jtqzNIMuUoZ6hIwip5ZwXguU9YVmCnXRw26ztlWURWC0QNMgkNdZe4kX9tMyu7b2W/jKrzzDsAdc1H8FPoiyB2I4r5vtoJZ6ykLkFeNblsCdxPMBCPyU6Nv9bWgPuTOifKQvldP+/3Sd9RA8MPFT+4cszZTgg8W2Dw+ntIjHNHz0hyKhCyhxf8p3uQNu3TLmGGiHC5g8oXtbvXmOKjAr4hhOw2wxsIZL8drZLNCGlFLpmYqs30gya5hLaLpczF/02bo
        smtpServer: AgA/KicBXpJwNcXpJtIefceqCpLVGQV4fY6nNWlPfXKqg/YX24zKQ3DFqAKYoDLd9P9pJ9A9hS7+f0+mXCo1fytmPet+YOjRp6AGbvDyJHDTltlcoaJ2Lrk4euAIxt9Z6ia44sIfr0OsLbJ4FcySx8aWmLYMx8PrZBEWMVIP0jUG0+heU5MiZsMXCUEf3kXHOIArEzDRB9CWku4EF+SnMjEU3fv76e3qfA0TfVCoHZAMQs38dO2BZL4esvY0VZS5CkEuzC8eT4YziF9F7plXlkuM0AuD/ofi3y34vVwkxbRVWcT1A+GGJm+dXv826W+j8bHcimkGufj/oGbB/kwmuiAclmzQ92DGHQMy2muotSruToP9+YWxi/hI060AXiiRTLcczjQf0DyLftVU/kGC4AMIui5k953ATeQb9y1ub28nYy208P+6EPPZLt6JgkGHtfUKYzOQcrGlifC5fbkkgEaa52S8Mz9FOpr1a1I0iu5LesjYCeic1WGc6YNg5HstacHmlLczoBU/T19/XIZyR8STlyHRmUqDCOd6Bwcd2flEaMsM5y2BI5tsiP0CyMhn0RAKEAxwErZEjfW3A9rw4GgjOoRlpXpz/tELmRrqPHOwCdjYcyO1/nmhlVzTg7itAnz8ieZxjpSsw5tSsw3USc1B4md9dqW7ZIbUYlq600dxroW7XhBj2uwHNoUqSztPt9tmXSD7+jfsSxUcJlEuFgM/nOqXyPtdttSWP0wT1LYDVLUE4kxGeSIqQp1GMaod8E58cZgk7SE3r8iefOJi2M8TF
        smtpFromAddress: AgCUX9C/soIci4Yg3thtf4AQbOm6fAELUyuT4P3x5569O+8nH4jmr4au5U1moVlA0TTHPCJfDObjv2JmvYTuKALVB3G4v7ZL0AEWu/qLo4gDYZ0FBFQD5bzhXmJupSCb6V4Z7TrDEXvA/eN9BHdxIML3N7Ut8UD5giuSjiOb4Wicr/TpjTn3LLJHmQUcDxwAyuAuf9Ga2K9LP5WJooysPEvm44bbS2meVuurKXQi7C9qhLaI5RUYrzAchHMudIz3G9rFYOaLsEg0ZKK/jZZKxlRWA/n5NMxkQkR7y3JEgnOu+hNeJhyIpWMW1ULcrigngySzzEtq+1neAkzkKVn1ildzNnY6HwGUIV9o7TAzFuxJdB5TaVxuGscUUnraD2N5QkeSGRIpXzkFqaxB4n8KSWvH+aQI2E6pJtH8cpvpPoTCNoy81TepBBvpn5XckGG3CzDpMqhHEJR0VdLUQxosD6KVzlpNIPl55ZG4zVC/JK0Zlcp4BpaFcp8qFc3n0VrGzwkPl5sN+eTxet4uLaqX+ArxyxuufpKEl/QY9LQTf6otG+CPCa91MV6TyWnRMYuiD1pU3AXDHB3hepZc4qAf0tI/AQIGATq1n8zj1e/zwfLVpjTZE6tBJ4pz91KCTVDayT4n1D0shSotzGJE3ZkLD67EV2/+Fys5KEvrduGYnZ5adXNfFfD86HPcLVN6Vg1mpYqFZ108=

  securityPolicy:
    extAuth:
      grpc:
        backendRefs:
          - group: ""
            kind: Service
            name: homelab-envoy-proxy-bouncer
            namespace: envoy-gateway-system
            port: 8080
