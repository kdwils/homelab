apiVersion: v1
data:
  app-config.yaml: |
    app:
      title: kyledev.co
      baseUrl: https://backstage.int.kyledev.co
    organization:
      name: kyledev.co
    backend:
      baseUrl: https://backstage.int.kyledev.co
      listen: 
        port: 7007
      database:
        client: pg
        connection:
          host: ${POSTGRES_HOST}
          port: ${POSTGRES_PORT}
          user: ${POSTGRES_USER}
          password: ${POSTGRES_PASSWORD}
      cors:
        origin: https://backstage.int.kyledev.co
        methods: [GET, HEAD, PATCH, POST, PUT, DELETE]
        credentials: true
    integrations:
      github:
        - host: github.com
          token: ${GITHUB_TOKEN}
    techdocs:
      builder: 'local'
      generator:
        runIn: 'docker'
      publisher:
        type: 'local'
    auth:
      environment: development
      providers:
        github:
          development:
            clientId: ${AUTH_GITHUB_CLIENT_ID}
            clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}
    proxy:
      '/argocd/api':
        target: https://argocd.kyledev.co/api/v1/
        changeOrigin: true
        # only if your argocd api has self-signed cert
        secure: false
        headers:
          Cookie:
            $env: ARGOCD_AUTH_TOKEN
kind: ConfigMap
metadata:
  name: backstage-config
  namespace: backstage
