homelab:
  sealedsecrets:
    - name: envoy-bouncer
      data:
        apiKey: AgBYzkG1JVpk27rRPq1dgEbGN9LD/11BTQJ8lAmSg5xjL3XiVsmG0ZsJxQDSwVZIFvOKcNW3jGax3Lb8HBg+RJ/1e29Na72MEzHCC7GpIAiU7xmdWbvBxgL+T4ZnfNpKQ5gUfK8jqgavkGdn8NeKrp+QCN3Ft5aXPmDi8OVam2T0zZSEkaeqFlqVwWRvpdaJTNqB6T36HswxD18VuBG3irgTAg4GD52NsTFajfIbzCwuvQDCrgRI/mmTBLSyN20icc7odtTcIAt1BRuaIpm62deDxPS+urP3K55faZcCun7xGUtvJKWB6EvK1VfPYNWuBG6InkWO5Q6Cka4uBsOF/14kkMdP+LX1FNUTE+LL+C0+Gt2pEp0+B61jutnb6buI72sGT2HoPE2W0BXUIPT3P6dCwsfyufEt5x0TvOIyDc+T5E5wyMH8kiXRZkVinAj2T0eUkPvkjrRt8vA70jPZn6hJ5/yDBOrtm6ycyAU1lNT3bDTRLZMO9svgho2VVq7ZKr0FSKSfiYkIULoe1Cyj8ZWUZwHmrQJmBGMsl+wgcgowOxs3hmWmIDyfSR5EGzJGvpjsag7b18ssGadWMKI1wecm9zUCNQW8dk1+Njy9x+ehyNeoFSwI4FlyFsMtE9UzNHDxot3cpwlX5XuV4LE5C+oPA+/atKGXfIjP3vKl8acdrnTIutlG+KzCJgxBc4Mxp6MXBhVHhWbEUpQl+uNPFlkXdc2kXxephdGyTeBxz0HJy12E6M/TtOMsRbyj
        secretKey: AgCeJINVJscNxcGDbOR7kvmlBNc58t8rpqapXQ6EaLuXKv5CmiNfRCKkdX+bmVaWg5Sv5CrvMnxL5RnurRUh2ZyEfmth8PuAmCaDgk5CPrLdr5lr2aChvYpPJETAzK2o3C0LROg7qt2POLv+2B21rP8wH5PEvdKEug9SuBxDGlpNVw0elbado7VFhtIc1meduObkHTEaON7xqsEvREZs3arfbXXcHVVA2MT1NnpXCrIawCAukGLHHqDMB2wtIYKb0K37jPBmGGFEfTIekBw/+XQ+0/1PM+Tn7BOMAxy45iJDsbR+z0ENyW5qR/I/mUQ5DVC2XwQsonJZmX2pwXGhtBBwdIrqEvMi0RYqcVxLRpabjUpQHkzz7EMhRtoyOnHjF1EogzcNZa3tIJkNKC1gNIe1AQJDOtoYifAvQSiBh/9THtLxlW9f5XXQTTC5ArLbJP7m9rukwWP3tSeungMgmpbMjjdB8ODzfu+koDPsKeO7NuuAA76Gsy0+Idhndg68YAaauCDmOYNm+3Ggs/061Yc3NKOHNie9gQ++1PjfVLyaAelLjrJ3sUX7xkKOmSpcwiTVQRkHFNwQ6mbQBEZGbJty2er3A50gcUuWl/CU03/loNypzqnqyCd6z+U1g941YvF/1GAHj1O2oa6p4Sk/azn3kxHmdaI4UlXSUDlr2ndqOZ+s0VzAAcqP67oHH1xw53mKyQPyEr7jUm4WWPkYYxZ8UbneSQPU1NINHIDqSTLdtZElYQ==
        signingKey: AgCU7/yuf85X0dySlJVYUuJzlur9Doc/Aem8luNDCGOMuG2XyqFpv/wbQl5vE3aSTokrH09GezT5grizbXL02+oaSI6A1P+sWL29NYq/NG4iB+xWfsDbfL8Z+CY3kZwsillzNPIpFpUs4uPnVPbcReK/+hW1/TxEYXwMXlDZ+rfTlVaPM8PraAkDrw3qSMI5yTWdsO3d+3YYf1LUPI+zQZ09PpVQUp6mtmkEHp7g9B1qd22juGDS1j0OMMTl+S7u7iub+Q+YaoF2HkDL2K14RG0gjDepqTk2/ogV1JTZK5Jqx9egFMWEifiTyFfGdoi0kmqzilrFv4xJXX4FXjK8qKrtFTVOzhjq8cHuHLDO+owYT89qrlPr1Rt9G9n5C0rp79MvDPOZBEG5wgrnSwrsraL2EM3NoRHtWW6DvGfB1cDdz8udlVnqNa5hViIAqY9gtKWHfNDatE+acHCH9b3baVIJL8cyhNup6yWzGrI8OiU5wCr5zZ4M++lhY9w0tmsClKum9ARuSoQWXsno3onYqmHLS8cYKMIspEU5742qsKcCuOm6HxZeNSCcols1Eswj6V8hAiP7kUp/S7Hql4sKSlNd76zfTleOPL/7MRcLysuCMRCprqU2+ZLQmEVJjCe25joPWbM/Juzj4WpxpQ/vC09GULrHGuoj2IhUIHgtva3J8bnIHpmtD4byG/pfp6Y3aph6GIxRdTG8p0Onzjfn81z3S6zDrscuYT950NNbayFba1VyvF0xx6FlPFigw/zmB/OSX3XEvw/fmuaZWxLYy5Sa

homelab-envoy-proxy-bouncer:
  replicaCount: 2
  fullnameOverride: homelab-envoy-proxy-bouncer
  nameOverride: homelab-envoy-proxy-bouncer

  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - all
    readOnlyRootFilesystem: true
    runAsNonRoot: true
    runAsUser: 1000

  config:
    trustedProxies:
      - 10.43.0.0/16
      - 10.42.0.0/16
    bouncer:
      enabled: true
      metrics: true
      metricsInterval: "10m"
      lapiURL: "http://crowdsec-service.crowdsec.svc.cluster.local:8080"
      tickerInterval: "10s"
      apiKeySecretRef:
        name: "envoy-bouncer"
        key: "apiKey"

    waf:
      enabled: true
      appSecURL: "http://crowdsec-appsec-service.crowdsec.svc.cluster.local:7422"
      apiKeySecretRef:
        name: "envoy-bouncer"
        key: "apiKey"

    captcha:
      enabled: true
      provider: "turnstile"
      siteKey: "0x4AAAAAAB1bbQbIpIhvAYwl"
      secretKeySecretRef:
        name: "envoy-bouncer"
        key: "secretKey"
      signingKeySecretRef:
        name: "envoy-bouncer"
        key: "signingKey"
      timeout: "10s"
      challengeDuration: "15m"
      sessionDuration: "1h"
      callbackURL: "https://bouncer.kyledev.co"
      cookieDomain: ".kyledev.co"
      secureCookie: true

  httproute:
    enabled: true
    parentRefs:
      - name: homelab
        namespace: envoy-gateway-system
    hostnames:
      - bouncer.kyledev.co

  referenceGrant:
    create: true
    fromNamespaces:
      - argocd
      - blog
      - bluesky
      - mealie
      - media
      - pocketid
      - vaultwarden
